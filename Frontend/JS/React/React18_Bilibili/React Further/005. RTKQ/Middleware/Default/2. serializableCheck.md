## 🧩 serializableCheck：防止非序列化数据进入 state

### 1. Redux 有个核心理念：

#### state 必须是“可序列化”的。
- 也就是说，Redux state 必须能被安全地保存为 JSON。

#### 🚫 错误示例

- 假设你在 state 里放了一个 Promise 或 DOM 节点：
```js
const store = configureStore({
  reducer: myReducer,
});

store.dispatch({
  type: 'SAVE_USER',
  payload: {
    name: 'Daniel',
    profilePromise: fetch('/api/profile'), // ❌ Promise 不是可序列化的
  },
});
```

#### Redux Toolkit 会在控制台报警告：

- A non-serializable value was detected in an action, in the path: payload.profilePromise

#### ✅ 为什么要这样？

- 如果 state 里有 Promise、Date、class 实例、DOM 节点等“复杂对象”，Redux DevTools、时间旅行调试（time travel）、持久化保存都可能出错。

#### 2. serializableCheck 就是：

- 检查你 dispatch 的 action 和保存的 state，确保它们都能被安全地转成 JSON。

- ⚙️ 如果你确实要放特殊对象，可以关闭或忽略警告：
``` js
const store = configureStore({
  reducer,
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: false, // 完全关闭
    }),
});
```

- 或者更安全的方式（只忽略特定路径）：
```js
getDefaultMiddleware({
  serializableCheck: {
    ignoredActions: ['SOME_ACTION'],
    ignoredPaths: ['meta.someNonSerializableThing'],
  },
});
```
